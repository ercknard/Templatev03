<!DOCTYPE html>
<html style="font-size: 16px;">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="page_type" content="np-template-header-footer-from-plugin">
    <title>Page 1</title>
    <link rel="stylesheet" href="nicepage.css" media="screen">
<link rel="stylesheet" href="Page-1.css" media="screen">
    <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 3.29.1, nicepage.com">
    <link rel="icon" href="images/favicon.png">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i|Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i">
    
    
    
    
    
    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "Site1",
		"logo": "images/banner.png"
}</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="Page 1">
    <meta property="og:description" content="">
    <meta property="og:type" content="website">
  </head>
  <body class="u-body"><header class="u-clearfix u-grey-10 u-header u-sticky u-header" id="sec-5caa"><div class="u-clearfix u-sheet u-valign-middle-lg u-valign-middle-md u-valign-middle-sm u-valign-middle-xl u-sheet-1">
        <a href="Home.html" data-page-id="63320719" class="u-image u-logo u-image-1" data-image-width="309" data-image-height="104" title="home">
          <img src="images/banner.png" class="u-logo-image u-logo-image-1">
        </a>
        <nav class="u-menu u-menu-dropdown u-offcanvas u-menu-1">
          <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px;">
            <a class="u-button-style u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="#">
              <svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use></svg>
              <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><symbol id="menu-hamburger" viewBox="0 0 16 16" style="width: 16px; height: 16px;"><rect y="1" width="16" height="2"></rect><rect y="7" width="16" height="2"></rect><rect y="13" width="16" height="2"></rect>
</symbol>
</defs></svg>
            </a>
          </div>
          <div class="u-custom-menu u-nav-container">
            <ul class="u-nav u-unstyled u-nav-1"><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="Home.html" style="padding: 10px 20px;">Home</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="About.html" style="padding: 10px 20px;">About</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="Announcements.html" style="padding: 10px 20px;">Announcements</a>
</li></ul>
          </div>
          <div class="u-custom-menu u-nav-container-collapse">
            <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
              <div class="u-inner-container-layout u-sidenav-overflow">
                <div class="u-menu-close"></div>
                <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2"><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Home.html" style="padding: 10px 20px;">Home</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="About.html" style="padding: 10px 20px;">About</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Announcements.html" style="padding: 10px 20px;">Announcements</a>
</li></ul>
              </div>
            </div>
            <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
          </div>
        </nav>
        <a href="Page-1.html" data-page-id="23740134" class="u-btn u-btn-round u-button-style u-gradient u-none u-radius-4 u-text-body-alt-color u-btn-1">Register</a>
      </div></header>
    <section class="u-clearfix u-section-1" id="sec-ac0c">
      <div class="u-clearfix u-sheet u-sheet-1">
        <div class="u-clearfix u-custom-html u-custom-html-1">
          <style> body{ font: 14px sans-serif; }
        .wrapper{ width: 360px; padding: 20px; } </style>
          <div class="wrapper">
            <h2>Sign Up</h2>
            <p>Please fill this form to create an account.</p>
            <form action="&lt;?php echo htmlspecialchars($_SERVER[" php_self"]);="" ?="">" method="post"&gt; <div class="form-group">
                <label>Username</label>
                <input type="text" name="username" class="''; 'is-invalid' (!empty($username_err)) : <?php ? ?> echo form-control" value="<?php echo $username; ?>">
                <span class="invalid-feedback"><!--?php echo $username_err; ?--></span>
              </div>
              <div class="form-group">
                <label>Password</label>
                <input type="password" name="password" class="''; 'is-invalid' (!empty($password_err)) : <?php ? ?> echo form-control" value="<?php echo $password; ?>">
                <span class="invalid-feedback"><!--?php echo $password_err; ?--></span>
              </div>
              <div class="form-group">
                <label>Confirm Password</label>
                <input type="password" name="confirm_password" class="''; 'is-invalid' (!empty($confirm_password_err)) : <?php ? ?> echo form-control" value="<?php echo $confirm_password; ?>">
                <span class="invalid-feedback"><!--?php echo $confirm_password_err; ?--></span>
              </div>
              <div class="form-group">
                <input type="submit" class="btn btn-primary" value="Submit">
                <input type="reset" class="btn btn-secondary ml-2" value="Reset">
              </div>
              <p>Already have an account? <a href="login.php">Login here</a>.
              </p>
            </form>
          </div>
        </div>
        <div class="u-custom-php u-custom-php-1" data-custom-php="<!--custom_php--><?php
// Include config file
require_once &quot;config.php&quot;;
 
// Define variables and initialize with empty values
$username = $password = $confirm_password = &quot;&quot;;
$username_err = $password_err = $confirm_password_err = &quot;&quot;;
 
// Processing form data when form is submitted
if($_SERVER[&quot;REQUEST_METHOD&quot;] == &quot;POST&quot;){
 
    // Validate username
    if(empty(trim($_POST[&quot;username&quot;]))){
        $username_err = &quot;Please enter a username.&quot;;
    } elseif(!preg_match('/^[a-zA-Z0-9_]+$/', trim($_POST[&quot;username&quot;]))){
        $username_err = &quot;Username can only contain letters, numbers, and underscores.&quot;;
    } else{
        // Prepare a select statement
        $sql = &quot;SELECT id FROM users WHERE username = ?&quot;;
        
        if($stmt = mysqli_prepare($link, $sql)){
            // Bind variables to the prepared statement as parameters
            mysqli_stmt_bind_param($stmt, &quot;s&quot;, $param_username);
            
            // Set parameters
            $param_username = trim($_POST[&quot;username&quot;]);
            
            // Attempt to execute the prepared statement
            if(mysqli_stmt_execute($stmt)){
                /* store result */
                mysqli_stmt_store_result($stmt);
                
                if(mysqli_stmt_num_rows($stmt) == 1){
                    $username_err = &quot;This username is already taken.&quot;;
                } else{
                    $username = trim($_POST[&quot;username&quot;]);
                }
            } else{
                echo &quot;Oops! Something went wrong. Please try again later.&quot;;
            }
            // Close statement
            mysqli_stmt_close($stmt);
        }
    }
    
    // Validate password
    if(empty(trim($_POST[&quot;password&quot;]))){
        $password_err = &quot;Please enter a password.&quot;;     
    } elseif(strlen(trim($_POST[&quot;password&quot;])) < 6){
        $password_err = &quot;Password must have atleast 6 characters.&quot;;
    } else{
        $password = trim($_POST[&quot;password&quot;]);
    }
    
    // Validate confirm password
    if(empty(trim($_POST[&quot;confirm_password&quot;]))){
        $confirm_password_err = &quot;Please confirm password.&quot;;     
    } else{
        $confirm_password = trim($_POST[&quot;confirm_password&quot;]);
        if(empty($password_err) &amp;&amp; ($password != $confirm_password)){
            $confirm_password_err = &quot;Password did not match.&quot;;
        }
    }
    
    // Check input errors before inserting in database
    if(empty($username_err) &amp;&amp; empty($password_err) &amp;&amp; empty($confirm_password_err)){
        
        // Prepare an insert statement
        $sql = &quot;INSERT INTO users (username, password) VALUES (?, ?)&quot;;
         
        if($stmt = mysqli_prepare($link, $sql)){
            // Bind variables to the prepared statement as parameters
            mysqli_stmt_bind_param($stmt, &quot;ss&quot;, $param_username, $param_password);
            
            // Set parameters
            $param_username = $username;
            $param_password = password_hash($password, PASSWORD_DEFAULT); // Creates a password hash
            
            // Attempt to execute the prepared statement
            if(mysqli_stmt_execute($stmt)){
                // Redirect to login page
                header(&quot;location: login.php&quot;);
            } else{
                echo &quot;Oops! Something went wrong. Please try again later.&quot;;
            }
            // Close statement
            mysqli_stmt_close($stmt);
        }
    }
    
    // Close connection
    mysqli_close($link);
}
?><!--/custom_php-->"></div>
      </div>
    </section>
    
    
    
    
    
    <footer class="u-align-center u-border-1 u-border-palette-1-light-2 u-clearfix u-footer u-gradient u-footer" id="sec-591a"><div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-small-text u-text u-text-variant u-text-white u-text-1">Flood o' Meter : Brgy. Maysilo Monitoring System.</p>
        <img class="u-image u-image-default u-preserve-proportions u-image-1" src="images/floodlogo.png" alt="" data-image-width="500" data-image-height="500">
      </div></footer>
  </body>
</html>